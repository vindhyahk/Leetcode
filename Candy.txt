class Solution:
    def candy(self, ratings: List[int]) -> int:
        candies=[1]* len(ratings)

        #we traverse from right to left once and then left to right to see if any neighbour kid has a higher rating 

        for i in range(1,len(ratings)):
            if ratings[i] > ratings[i-1]:
                candies[i]=candies[i-1]+1

        for i in range(len(ratings)-2, -1, -1): 	#-2 since second last child(last child doesnt have a right neighbour)
            if ratings[i] > ratings[i+1]:
                candies[i] =max(candies[i], candies[i+1]+ 1)
        
        return sum(candies)